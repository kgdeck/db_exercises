CREATE TABLE ADDRESS (
   ID INT PRIMARY KEY,
   COUNTRY VARCHAR(100),
   STATE VARCHAR(100),
   ZIP VARCHAR(20),
   CITY VARCHAR(100),
   STREET VARCHAR(100),
   STREET_NR VARCHAR(20)
);

CREATE TABLE CUSTOMER (
   ID INT PRIMARY KEY,
   NAME VARCHAR(100),
   IS_VIP INT DEFAULT 0,
   ADDRESS INT
);
ALTER TABLE CUSTOMER ADD CONSTRAINT FK_CUSTOMER_ADDRESS FOREIGN KEY (ADDRESS) REFERENCES ADDRESS(ID);

CREATE TABLE EMPLO (
   ID INT PRIMARY KEY,
   NAME VARCHAR(100),
   SHOP INT,
   HIRE_DATE DATE,
   JOB VARCHAR(100),
   WORKLOAD NUMERIC(10, 2),
   SALARY INT,
   ADDRESS INT,
   REPORTS_TO INT,
   FOREIGN KEY (REPORTS_TO) REFERENCES EMPLO(ID),
   CHECK (WORKLOAD BETWEEN 0.0 AND 1.0)
);

ALTER TABLE EMPLO ADD CONSTRAINT FK_EMPLO_ADDRESS FOREIGN KEY (ADDRESS) REFERENCES ADDRESS(ID);

CREATE TABLE SHOP (
   ID INT PRIMARY KEY,
   NAME VARCHAR(100),
   ADDRESS INT,
   MANAGER INT
);
ALTER TABLE SHOP ADD CONSTRAINT FK_SHOP_ADDRESS FOREIGN KEY (ADDRESS) REFERENCES ADDRESS(ID);
ALTER TABLE SHOP ADD CONSTRAINT FK_SHOP_MANAGER FOREIGN KEY (MANAGER) REFERENCES EMPLO(ID);
ALTER TABLE EMPLO ADD CONSTRAINT FK_EMPLO_SHOP FOREIGN KEY (SHOP) REFERENCES SHOP(ID);

CREATE TABLE BIKE_TYPE (
   ID INT PRIMARY KEY,
   TYPE_NAME VARCHAR(20),
   TYPE_DESCRIPTION VARCHAR(100)
);

CREATE TABLE BIKE (
   ID INT PRIMARY KEY,
   MODELL VARCHAR(100),
   FRAME_SIZE VARCHAR(20),
   WHEEL_SIZE VARCHAR(20),
   BIKE_TYPE INT,
   EBIKE INT,
   SHOP INT
);
ALTER TABLE BIKE ADD CONSTRAINT FK_BIKE_TYPE FOREIGN KEY (BIKE_TYPE) REFERENCES BIKE_TYPE(ID);
ALTER TABLE BIKE ADD CONSTRAINT FK_BIKE_SHOP FOREIGN KEY (SHOP) REFERENCES SHOP(ID);

CREATE TABLE RENTAL (
    ID INT PRIMARY KEY,
    CUSTOMER INT,
    BIKE INT,
    RENTAL_DATE DATE,
    RETURN_DATE DATE,
    RESPONSIBLE INT
);
ALTER TABLE RENTAL ADD CONSTRAINT FK_RENTAL_CUSTOMER FOREIGN KEY (CUSTOMER) REFERENCES CUSTOMER(ID);
ALTER TABLE RENTAL ADD CONSTRAINT FK_RENTAL_BIKE FOREIGN KEY (BIKE) REFERENCES BIKE(ID);
ALTER TABLE RENTAL ADD CONSTRAINT FK_RENTAL_RESPONSIBLE FOREIGN KEY (RESPONSIBLE) REFERENCES EMPLO(ID);


CREATE TABLE DAMAGE (
   ID INT PRIMARY KEY,
   DESCRIPTION VARCHAR(100),
   RENTAL INT,
   DAMAGE_DATE DATE,
   STATUS INT,
   RESPONSIBLE INT,
   REPAIR_DATE DATE,
   REMARKS VARCHAR(100)
);

ALTER TABLE DAMAGE ADD CONSTRAINT FK_DAMAGE_RENTAL FOREIGN KEY (RENTAL) REFERENCES RENTAL(ID);
ALTER TABLE DAMAGE ADD CONSTRAINT FK_DAMAGE_RESPONSIBLE FOREIGN KEY (RESPONSIBLE) REFERENCES EMPLO(ID);
